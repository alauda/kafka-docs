---
weight: 10
sourceSHA: 5653eec3c7f2d48ce5b2bd3c71c84fdf2b4e28788fd7506afd946b4408112515
---

# Изменения в спецификациях

По мере роста объема данных крайне важно своевременно увеличивать емкость, прежде чем использование ресурсов приблизится к квоте хранения, чтобы обеспечить непрерывную доступность услуг.

## Примечания к ограничениям

1. Если вы внесли настройки, связанные с расписанием, для текущего экземпляра, изменения в количестве реплик должны соответствовать текущей конфигурации расписания.
2. Рекомендуется масштабировать все узлы до одинаковой спецификации, так как увеличение емкости хранения одного Брокера может привести к неравномерному распределению. Емкость хранения на расширенном Брокере может быть переполнена, в то время как емкость хранения на других Брокерах может быть не полностью использована. В этом случае, возможно, потребуется мигрировать существующие данные для достижения сбалансированного распределения по новым дисковым пространствам. Это означает, что некоторые данные могут потребоваться перенести с оригинального Брокера на расширенный Брокер, что усложняет и добавляет операции по миграции данных. Чтобы избежать этих проблем, рекомендуется поддерживать равенство или как можно больший близость емкости хранения Брокеров при расширении кластера Kafka. Это обеспечит сбалансированное распределение данных и нагрузки, улучшая производительность и надежность кластера.
3. При изменении ресурсов CPU и памяти оценивайте на основе бизнес-требований и доступности ресурсов, чтобы избежать неудач расширения из-за слишком маленьких или слишком больших ресурсов, что может предотвратить нормальный запуск экземпляра.

## Процедура

<Tabs>
  <Tab label="CLI">
    Чтобы изменить спецификации экземпляра, вы можете управлять этим через поле `spec.resources`.

    ```bash
    # Установить спецификации экземпляра на cpu:300m, memory: 300Mi
    kubectl -n <namespace> patch rdskafka <name> --type=merge --patch='{"spec": {"resources":{"limits":{"cpu": "2","memory":"4Gi"},"requests":{"cpu":"2", "memory":"4Gi"}}}}'
    ```
  </Tab>

  <Tab label="Web Console">
    1. В левом навигационном меню нажмите **Kafka**.

    2. Нажмите на ***имя пространства имен***.

    3. Нажмите на ***имя экземпляра***.

    4. Вкладка **Подробности**, нажмите на **Изменения спецификации** выше топологии.

    5. Заполните желаемое количество реплик и новые спецификации для соответствующих ресурсов.

    6. Нажмите **Обновить**.
  </Tab>
</Tabs>

Подождите немного, и вы увидите соответствующие изменения в **Спецификациях** в топологии.
