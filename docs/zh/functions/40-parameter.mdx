---
weight: 40
sourceSHA: 91b3a6f23c82fd4a7a82e5103ba529e5c6a959cbb5a35d9221c9d2e3a3f1b66c
---
# 参数配置

创建 Kafka 实例时默认使用系统参数模板。您也可在参数模板中自定义配置。

<Directive type="tip" title="注意事项">
1. Kafka 版本升级后，如果有需要删除、废弃或变更的参数配置，请查阅 <a href="https://kafka.apache.org/documentation" target="_blank">Kafka 官网</a> 对应修改。
2. 为保障 Kafka 环境稳定运行，不支持设置部分参数及参数前缀（例如 `advertised.`
`authorizer.`
`broker.`
`controller`
`cruise.control.metrics.reporter.bootstrap.`
`cruise.control.metrics.topic`
`host.name`
`inter.broker.listener.name`
`listener.`
`listeners.`
`log.dir`
`password.`
`port`
`process.roles`
`sasl.`
`security.`
`servers,node.id`
`ssl.`
`super.user`
`zookeeper.clientCnxnSocket`
`zookeeper.connect`
`zookeeper.set.acl`
`zookeeper.ssl`）。

</Directive>

## 步骤

<Tabs>

<Tab label="CLI">


```bash
# 更新实例的配置
kubectl -n <namespace> patch rdskafka <name> --type=merge --patch='{"spec": {"config": {"auto.create.topics.enable":"true"}}}'
```

</Tab>


<Tab label="Web Console">

1. 在左侧导航栏中，单击 **Kafka**。
2. 选择目标命名空间。
3. 单击目标实例名称进入详情页。
4. 在 **参数配置** 页签下，单击 **更新参数**。
5. 根据业务需求设置参数。
6. 单击 **更新**。

</Tab>

</Tabs>

## 参数支持说明

| 参数                                          | 类型       | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 默认值               | 可选值          |
| --------------------------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- | ---------------- |
| auto.create.topics.enable                     | boolean    | 启用服务器自动创建主题                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | true                |                  |
| auto.leader.rebalance.enable                  | boolean    | 启用自动领导者平衡。后台线程定期检查分区领导者的分布，检查间隔可通过 `leader.imbalance.check.interval.seconds` 配置。如果领导者的不平衡超过 `leader.imbalance.per.broker.percentage`，则触发分区的领导者重新平衡回优选领导者。                                                                                                                                                                                                                       | true                |                  |
| background.threads                            | int        | 用于各种后台处理任务的线程数量                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 10                  | \[1,...]         |
| compression.type                              | string     | 指定给定主题的最终压缩类型。此配置接受标准压缩编解码器（'gzip', 'snappy', 'lz4', 'zstd'）。此外，它还接受 'uncompressed'，相当于无压缩；和 'producer'，意味着保留生产者设置的原始压缩编解码器。                                                                                                                                                                                                                                               | producer            |                  |
| delete.topic.enable                           | boolean    | 启用删除主题。如果此配置关闭，通过管理工具删除主题将不起作用                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | true                |                  |
| leader.imbalance.check.interval.seconds       | long       | 控制器触发分区重新平衡检查的频率                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 300                 |                  |
| leader.imbalance.per.broker.percentage        | int        | 允许每个代理的领导者不平衡的比率。控制器将在每个代理超过此值时触发领导者平衡。该值以百分比表示。                                                                                                                                                                                                                                                                                                                                                                                                                                         | 10                  |                  |
| log.flush.interval.messages                   | long       | 在将消息刷新到磁盘之前，日志分区中累计的消息数量                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 9223372036854775807 | \[1,...]         |
| log.flush.offset.checkpoint.interval.ms       | int        | 更新最后一次刷新持久记录的频率，该记录作为日志恢复点                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 60000               | \[0,...]         |
| log.flush.scheduler.interval.ms               | long       | 日志刷新器检查是否需要刷新日志到磁盘的频率（以毫秒为单位）                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 9223372036854775807 |                  |
| log.flush.start.offset.checkpoint.interval.ms | int        | 更新日志开始偏移量的持久记录的频率                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 60000               | \[0,...]         |
| log.retention.bytes                           | long       | 删除日志之前的最大大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | -1                  |                  |
| log.retention.hours                           | int        | 删除日志文件之前保留的小时数（以小时为单位），优先于 log.retention.ms 属性                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 168                 |                  |
| log.roll.hours                                | int        | 新日志段推出的最大时间（以小时为单位），次于 log.roll.ms 属性                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 168                 | \[1,...]         |
| log.roll.jitter.hours                         | int        | 从 logRollTimeMillis 减去的最大抖动（以小时为单位），次于 log.roll.jitter.ms 属性                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 0                   | \[0,...]         |
| log.segment.bytes                             | int        | 单个日志文件的最大大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 1073741824          | \[14,...]        |
| log.segment.delete.delay.ms                   | long       | 从文件系统中删除文件之前等待的时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 60000               | \[0,...]         |
| message.max.bytes                             | int        | Kafka 允许的最大记录批大小（在启用压缩后）。如果增加此值，且存在早于 0.10.2 的消费者，则消费者的获取大小也必须增加，以便它们能够获取如此大的记录批。在最新的消息格式版本中，记录总是以批次的形式进行分组，以提高效率。在以前的消息格式版本中，未压缩的记录不按批次分组，此限制仅适用于单个记录。在该情况下，可以通过主题级别的 max.message.bytes 配置按主题设置此值。                                                                                      | 1048588             | \[0,...]         |
| min.insync.replicas                           | int        | 当生产者将 ack 设置为 "all"（或 "-1"）时，min.insync.replicas 指定必须确认写入的最小副本数量，以便将写入视为成功。如果无法满足此最低要求，则生产者将抛出异常（NotEnoughReplicas 或 NotEnoughReplicasAfterAppend）。同时使用 min.insync.replicas 和 acks 可让您实施更大的耐久性保证。一个典型的场景是创建一个具有 3 的副本因子的主题，将 min.insync.replicas 设置为 2，并以 "all" 的 acks 进行生产。这将确保如果大多数副本未接收到写入，则生产者抛出异常。 | 1                   | \[1,...]         |
| num.io.threads                                | int        | 服务器用于处理请求的线程数量，可能包括磁盘 I/O                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 8                   | \[1,...]         |
| num.network.threads                           | int        | 服务器用于接收来自网络的请求和发送响应到网络的线程数量                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3                   | \[1,...]         |
| num.recovery.threads.per.data.dir             | int        | 用于日志恢复和关机时刷新每个数据目录的线程数量                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 1                   | \[1,...]         |
| num.replica.fetchers                          | int        | 用于从源代理中复制消息的获取线程数量。增加此值可增加跟随者代理中的 I/O 并行度。                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 1                   |                  |
| offset.metadata.max.bytes                     | int        | 与偏移提交关联的元数据条目的最大大小                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 4096                |                  |
| offsets.commit.required.acks                  | short      | 提交之前所需的 ack。一般来说，默认值（-1）不应被覆盖                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | -1                  |                  |
| offsets.commit.timeout.ms                     | int        | 偏移提交将延迟，直到所有偏移主题的副本收到提交或者达到此超时。这类似于生产者请求超时。                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 5000                | \[1,...]         |
| offsets.load.buffer.size                      | int        | 加载偏移到缓存时，从偏移段读取的批大小（软限制，若记录过大则会被覆盖）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 5242880             | \[1,...]         |
| offsets.retention.check.interval.ms           | long       | 检查过期偏移的频率                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 600000              | \[1,...]         |
| offsets.retention.minutes                     | int        | 消费者组失去所有消费者（即变为空）后，其偏移将在此保留期内保持，然后被丢弃。对于独立消费者（使用手动分配），在最后提交时间加上此保留期后，偏移将过期。                                                                                                                                                                                                                                                                                                                                                                               | 10080               | \[1,...]         |
| offsets.topic.compression.codec               | int        | 偏移主题的压缩编解码器 - 压缩可能用于实现“原子”提交                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 0                   |                  |
| offsets.topic.num.partitions                  | int        | 偏移提交主题的分区数量（部署后不应更改）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 50                  | \[1,...]         |
| offsets.topic.replication.factor              | short      | 偏移主题的副本因子（设置更高以确保可用性）。在集群规模满足此副本因子要求之前，内部主题创建将失败。                                                                                                                                                                                                                                                                                                                                                                                                                                         | 3                   | \[1,...]         |
| offsets.topic.segment.bytes                   | int        | 偏移主题段字节应保持相对较小，以便促进更快的日志压缩和缓存加载                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 104857600           | \[1,...]         |
| queued.max.requests                           | int        | 数据平面允许的排队请求数量，在阻塞网络线程之前                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 500                 | \[1,...]         |
| quota.consumer.default                        | long       | 已废弃：仅在未为或在 Zookeeper 中配置动态默认配额时使用。任何通过 clientId/consumer group 区分的消费者，如果每秒提取的字节超过此值，将会限速。                                                                                                                                                                                                                                                                                                                                                                            | 9223372036854775807 | \[1,...]         |
| quota.producer.default                        | long       | 已废弃：仅在未为或在 Zookeeper 中配置动态默认配额时使用。任何通过 clientId 区分的生产者，如果每秒生产的字节超过此值，将会限速。                                                                                                                                                                                                                                                                                                                                                                                   | 9223372036854775807 | \[1,...]         |
| replica.fetch.min.bytes                       | int        | 每个获取响应期望的最小字节。如果未获得足够字节，则等待直到 replicaMaxWaitTimeMs                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 1                   |                  |
| replica.fetch.wait.max.ms                     | int        | 每个跟随者副本发出的获取请求的最大等待时间。该值始终应小于 replica.lag.time.max.ms，以防止低吞吐量主题频繁缩小 ISR。                                                                                                                                                                                                                                                                                                                                                                                                                          | 500                 |                  |
| replica.high.watermark.checkpoint.interval.ms | long       | 保存高水位线到磁盘的频率                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 5000                |                  |
| replica.lag.time.max.ms                       | long       | 如果跟随者未发送任何获取请求或在至少此时间内未消费到领导者日志末尾的偏移量，则领导者将从 ISR 中移除该跟随者。                                                                                                                                                                                                                                                                                                                                                                                                                                     | 30000               |                  |
| replica.socket.receive.buffer.bytes           | int        | 用于网络请求的套接字接收缓冲区                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 65536               |                  |
| replica.socket.timeout.ms                     | int        | 网络请求的套接字超时。其值应至少为 replica.fetch.wait.max.ms。                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 30000               |                  |
| request.timeout.ms                            | int        | 配置控制客户端等待请求响应的最长时间。如果在超时过期之前未收到响应，客户端将在必要时重新发送请求，或者在重试耗尽时使请求失败。                                                                                                                                                                                                                                                                                                                                                                                                                             | 30000               |                  |
| socket.receive.buffer.bytes                   | int        | 套接字服务器套接字的 SO\_RCVBUF 缓冲区。如果值为 -1，则使用操作系统默认值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 102400              |                  |
| socket.request.max.bytes                      | int        | 套接字请求中最大字节数                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 104857600           | \[1,...]         |
| socket.send.buffer.bytes                      | int        | 套接字服务器套接字的 SO\_SNDBUF 缓冲区。如果值为 -1，则使用操作系统默认值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 102400              |                  |
| transaction.max.timeout.ms                    | int        | 事务允许的最长超时时间。如果客户端请求的事务时间超过此值，则代理将在 InitProducerIdRequest 中返回错误。这防止客户端设置过大的超时，这可能会导致正在读取事务中主题的消费者停滞。                                                                                                                                                                                                                                                                                                                                                                    | 900000              | \[1,...]         |
| transaction.state.log.load.buffer.size        | int        | 从事务日志段读取以加载生产者 ID 和事务到缓存中的批大小（软限制，若记录过大则会被覆盖）。                                                                                                                                                                                                                                                                                                                                                                                                                                   | 5242880             | \[1,...]         |
| transaction.state.log.min.isr                 | int        | 事务主题的 min.insync.replicas 配置被覆盖。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 2                   | \[1,...]         |
| transaction.state.log.num.partitions          | int        | 事务主题的分区数量（部署后不应更改）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 50                  | \[1,...]         |
| transaction.state.log.replication.factor      | short      | 事务主题的副本因子（设置更高以确保可用性）。在集群规模满足此副本因子要求之前，内部主题创建将失败。                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 3                   | \[1,...]         |
| transaction.state.log.segment.bytes           | int        | 事务主题段字节应保持相对较小，以便促进更快的日志压缩和缓存加载                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 104857600           | \[1,...]         |
| transactional.id.expiration.ms                | int        | 事务协调者在没有收到任何事务状态更新的情况下等待当前事务的时间（以毫秒为单位），直到其事务 ID 过期。此设置还会影响生产者 ID 过期 - 生产者 ID 会在自上次写入具有给定生产者 ID 之后的此时间经过时过期。请注意，如果由于主题的保留设置删除了生产者 ID 的最后写入，则生产者 ID 可能会更早过期。                                                                                                               | 604800000           | \[1,...]         |
| unclean.leader.election.enable                | boolean    | 指示是否启用不在 ISR 集合中的副本作为最后手段被选举为领导者，即使这样做可能会导致数据丢失。                                                                                                                                                                                                                                                                                                                                                                                                                                                        | false               |                  |
| zookeeper.max.in.flight.requests              | int        | 客户端发送到 Zookeeper 的未确认请求的最大数量，超过后将阻塞。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 10                  | \[1,...]         |
| zookeeper.session.timeout.ms                  | int        | Zookeeper 会话超时                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 18000               |                  |

有关更多参数支持，请访问 [Kafka 官网](https://kafka.apache.org/documentation/#configuration)。
