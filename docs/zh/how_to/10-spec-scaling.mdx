---
weight: 10
---

# 规格变更

随着数据量增长，在资源使用量接近存储配额前应及时扩容，以确保业务的持续可用。

## 限制说明 
1. 如果您为当前实例做了调度相关设置，副本数发生变化时需要满足当前的调度配置。
2. 建议所有节点扩容至相同的规格，因为仅扩容单个 Broker 的存储容量会导致存储不平衡，扩容的 Broker 上的存储容量可能会过度使用，而其他 Broker 上的存储容量可能未被充分利用。此时可能需要对现有的数据进行迁移，以在新的存储空间上进行均衡分布。这意味着需要将一部分数据从原有的 Broker 上迁移到扩容的 Broker 上，这会引入数据迁移的复杂性和额外的操作。为了避免这些问题，建议在扩容 Kafka 集群时，保持 Broker 的存储容量相等，或者尽量接近。这样可以实现数据和负载的均衡分布，提高集群的性能和可靠性。
3. 变更 CPU 与 内存资源时，请根据业务情况与资源余量做评估，以避免资源过小或过大时实例扩容失败从而导致无法被正常拉起。

## 操作步骤 
<Tabs>
<Tab label="Web Console">

1. 在左侧导航栏中，单击 **Redis**。

2. 单击 ***命名空间的名称***。

2. 单击 ***实例名称*** 。

3. 在 **详细信息** 页签下，单击拓扑上方的 **规格变更**。

4. 为对应的资源填入期望的副本数与新规格。

5. 单击 **更新**。


</Tab>
<Tab label="CLI">

要变更实例规格，可通过字段 `spec.resources` 来控制。

```bash
# 设置实例的规格为 cpu:300m, memory: 300Mi
kubectl -n default patch rdskafka my-cluster --type=merge --patch='{"spec": {"resources":{"limits":{"cpu": "2","memory":"4Gi"},"requests":{"cpu":"2", "memory":"4Gi"}}}}'
```
</Tab>

</Tabs>

稍等片刻，即可看到拓扑中的 **规格** 对应变化。